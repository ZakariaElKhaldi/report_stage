\documentclass[12pt, a4paper]{report}

% --- Packages ---
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{amsmath}
\usepackage{geometry}
\usepackage{array}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{lmodern}
\usepackage{microtype}
\usepackage{fancyhdr}
\usepackage{listings}
\usepackage[scaled=0.85]{beramono}
\usepackage{tikz}
\usepackage{afterpage}
\usepackage{tcolorbox}
\usepackage{titletoc}

% --- Font Configuration ---

% --- Color Definitions ---
\definecolor{primary}{RGB}{0,102,204}
\definecolor{secondary}{RGB}{102,102,153}
\definecolor{accent}{RGB}{204,0,0}
\definecolor{darkgray}{RGB}{90,90,90}
\definecolor{lightgray}{RGB}{240,240,240}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codeblue}{rgb}{0,0,0.9}
\definecolor{codegreen}{rgb}{0.1,0.6,0.1}

% --- Page Geometry ---
\geometry{
  a4paper,
  left=2.5cm,
  right=2.5cm,
  top=2.5cm,
  bottom=2.5cm,
  headheight=15pt
}

% --- Header/Footer Setup ---
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\small Rapport de Stage}
\fancyhead[R]{\small Zakaria el Khaldi}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

% --- Title Formatting ---
\titleformat{\chapter}
  {\normalfont\LARGE\bfseries\color{primary}}
  {\thechapter}{1em}{}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}

\titleformat{\section}
  {\normalfont\Large\bfseries\color{primary}}
  {\thesection}{1em}{}
\titleformat{\subsection}
  {\normalfont\large\bfseries\color{secondary}}
  {\thesubsection}{1em}{}
\titleformat{\subsubsection}
  {\normalfont\normalsize\bfseries\color{accent}}
  {\thesubsubsection}{1em}{}

% --- List Formatting ---
\setlist[itemize]{leftmargin=*, nosep}
\setlist[enumerate]{leftmargin=*, nosep}

% --- Hyperlink Setup ---
\hypersetup{
  colorlinks=true,
  linkcolor=primary,
  urlcolor=secondary,
  citecolor=accent
}

% --- Listings Setup for Code ---
\lstdefinestyle{codestyle}{
    basicstyle=\ttfamily\footnotesize,
    numbers=left,
    numberstyle=\tiny\color{codegray},
    stepnumber=1,
    numbersep=5pt,
    backgroundcolor=\color{white!95!black},
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    frame=tb,
    framextopmargin=3pt,
    framexbottommargin=3pt,
    rulecolor=\color{black!30!white},
    tabsize=2,
    captionpos=b,
    breaklines=true,
    breakatwhitespace=false,
    stringstyle=\color{codepurple},
    commentstyle=\color{codegreen},
    keywordstyle=\color{codeblue}
}

% --- Image path configuration ---
% When you upload images to Overleaf, place them in folders named:
% week_1_img, week_2_img, week_3_img, week_4_img
\graphicspath{{week_1_img/}{week_2_img/}{week_3_img/}{week_4_img/}{./}}

% --- Document Information ---
\title{\Huge\bfseries\color{primary} Rapport de Stage \\ 
       \Large Conception et Développement d'une Plateforme E-learning}
\author{\Large Zakaria el Khaldi}
\date{\large Juin 2025}

% --- TOC Formatting ---
\renewcommand{\contentsname}{Sommaire}

% New TOC formatting
\titlecontents{chapter}
    [0em]                                       % left margin
    {\vspace{1.5em}\large\bfseries}             % above code (font size, weight)
    {\color{primary}}                           % numbered entry format (removed number)
    {\color{primary}}                           % unnumbered entry format
    {\titlerule*[1pc]{.}\contentspage}          % filler and page number
    [\vspace{0.5em}]                            % below code

% Format for section entries
\titlecontents{section}
    [2.3em]                               % left margin
    {\normalfont}                         % above code
    {\contentslabel{2.3em}}              % numbered entry format
    {}                                    % unnumbered entry format
    {\titlerule*[1pc]{.}\contentspage}    % filler and page number

% Format for subsection entries
\titlecontents{subsection}
    [4.6em]                               % left margin
    {\small}                              % above code
    {\contentslabel{2.8em}}              % numbered entry format
    {}                                    % unnumbered entry format
    {\titlerule*[1pc]{.}\contentspage}    % filler and page number

% Format for subsubsection entries
\titlecontents{subsubsection}
    [7.4em]                               % left margin
    {\small\itshape}                      % above code
    {\contentslabel{3.3em}}              % numbered entry format
    {}                                    % unnumbered entry format
    {\titlerule*[1pc]{.}\contentspage}    % filler and page number

% --- Chapter Styling ---
\def\@makechapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \huge\bfseries\color{primary} \thechapter \\ #1
        \par\nobreak
        \vskip 20\p@
      \fi
    \fi
    \interlinepenalty\@M
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
      \else
        \Huge \bfseries \color{primary} #1
      \fi
    \else
      \Huge \bfseries \color{primary} #1
    \fi
    \par\nobreak
    \vskip 40\p@
    \hrule
    \vskip 40\p@
  }
  \newpage
}

\def\@makeschapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \Huge \bfseries \color{primary} #1\par\nobreak
    \vskip 40\p@
    \hrule
    \vskip 40\p@
  }
  \newpage
}

% --- Apply fancy style to all chapters automatically ---
\makeatletter
\renewcommand\chapter{\if@openright\cleardoublepage\else\clearpage\fi
                    \thispagestyle{fancy}%
                    \global\@topnum\z@
                    \@afterindentfalse
                    \secdef\@chapter\@schapter}
\makeatother

% --- Prevent duplicate chapter numbers ---
\renewcommand{\thechapter}{\arabic{chapter}}
\makeatletter
\renewcommand{\@seccntformat}[1]{%
  \ifcsname format#1\endcsname
    \csname format#1\endcsname
  \else
    \csname the#1\endcsname\quad
  \fi
}
\makeatother

% Format chapter numbering (hide in document text since it's in the title)
\makeatletter
\newcommand{\formatchapter}{}
\makeatother

\begin{document}

% --- Cover Page ---
\begin{titlepage}
    \centering
    % --- Kingdom and Ministry Text ---
    {\LARGE \textbf{Royaume du Maroc}}\\[0.2cm]
    {\small \textbf{Ministère de l'Éducation Nationale, du Préscolaire et des Sports}}\\[0.2cm]
    \rule{\linewidth}{0.4mm} \\[0.4cm]

    % --- Logos Section ---
    \begin{minipage}{0.45\textwidth}
        \flushleft
        \includegraphics[width=3.5cm]{ministere.jpg}
    \end{minipage}
    \begin{minipage}{0.45\textwidth}
        \flushright
        \includegraphics[width=5cm]{bts_logo.png}
    \end{minipage}\\[1.3cm]

    % --- Enterprise Name (IAAI) ---
    \begin{tcolorbox}[colback=primary!10, colframe=primary, width=8cm, height=2.5cm, halign=center, valign=center]
        {\fontsize{40}{48}\selectfont\textcolor{primary}{\textbf{IAAI}}}
    \end{tcolorbox}
    
    \vspace{1.3cm}
    
    % --- Report Title ---
    \rule{\linewidth}{0.4mm} \\[0.3cm]
    {\Huge \textbf{Rapport de Stage}}\\[0.3cm]
    \rule{\linewidth}{0.4mm} \\[0.7cm]
    
    % --- Project Subject ---
    {\large \textbf{Projet : Conception et Développement d'une Plateforme E-learning}}\\[1.5cm]
    
    % --- Student and Supervisor Information ---
    \begin{minipage}{0.45\textwidth}
        \flushleft
        {\large \textbf{Présenté par :}}\\[0.2cm]
        {\large \textsc{Zakaria el Khaldi}}\\[0.5cm]
        {\large \textbf{Formation :} [Formation]}\\[0.2cm]
        {\large \textbf{Établissement :} [Établissement]}
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\textwidth}
        \flushright
        {\large \textbf{Sous la supervision de :}}\\[0.2cm]
        {\large [Nom du superviseur]}\\[0.2cm]
        {\large [Fonction du superviseur]}
    \end{minipage}\\[1.5cm]
    
    % --- Internship Period ---
    {\large \textbf{Période de stage :}}\\[0.2cm]
    {\large Du 5 mai 2025 au [Date de fin]}\\[1.8cm]
    
    % --- Academic Year ---
    {\large \textbf{Année Académique : [Année Académique]}}\\
    
\end{titlepage}

% --- Remerciements ---
\chapter*{Remerciements}
\addcontentsline{toc}{chapter}{Remerciements}
\thispagestyle{fancy}

Je tiens à exprimer ma profonde gratitude à toutes les personnes qui ont contribué à la réussite de ce stage et à l'élaboration de ce rapport.

Je remercie tout d'abord M. Ahmed Benali, Directeur Technique de LearnTech Solutions, pour son accueil au sein de l'entreprise, sa disponibilité et ses précieux conseils qui m'ont guidé tout au long de cette expérience professionnelle.

Mes remerciements s'adressent également à l'ensemble de l'équipe de LearnTech Solutions pour leur accueil chaleureux, leur soutien et leur partage de connaissances qui ont rendu cette expérience particulièrement enrichissante.

Je suis également reconnaissant envers mon université et mes professeurs pour la qualité de l'enseignement reçu qui m'a permis d'aborder ce stage avec les compétences nécessaires.

Enfin, je remercie ma famille et mes amis pour leur soutien inconditionnel tout au long de mon parcours.

\newpage

% --- Table of Contents ---
\tableofcontents
\thispagestyle{fancy}
\newpage

% --- Include Chapter Files ---
% Each chapter.s content is in a separate file for better organization

% Create unnumbered introduction
\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}
\thispagestyle{fancy}

Ce rapport présente le travail réalisé lors de mon stage de fin d'études effectué au sein de LearnTech Solutions du 10 mai au 10 juin 2025. Durant cette période, j'ai participé à la conception et au développement d'une plateforme e-learning complète destinée aux entreprises et aux professionnels individuels.

L'objectif de ce stage était de mettre en pratique les connaissances théoriques acquises durant ma formation et de les approfondir dans un contexte professionnel. Ce projet m'a permis de développer des compétences en développement web, en conception d'architecture logicielle, en gestion de bases de données et en traitement de données.

Ce rapport détaille l'ensemble des travaux réalisés durant les différentes semaines du stage, les méthodologies employées, les difficultés rencontrées et les solutions apportées, ainsi que les résultats obtenus.

% Chapter 1: Presentation of the Company and Internship Framework
\include{chapter_1}

% Chapter 2: Requirements and Specifications
\include{chapter_2}

% Chapter 3: Platform Design and Architecture
\include{chapter_3}

% Chapter 4: Development and Implementation
\include{chapter_4}

% Chapter 5: Deployment and Optimization
\include{chapter_5}

% Chapter 6: Assessment and Future Perspectives
\include{chapter_6}

\chapter{Chapitre 7 : Conclusion et Perspectives}
\thispagestyle{fancy}
\newpage

Ce stage de quatre semaines chez LearnTech Solutions m'a permis de participer activement au développement d'une plateforme e-learning innovante. Au cours de cette période, j'ai pu mettre en pratique mes connaissances théoriques et acquérir de nouvelles compétences techniques dans un environnement professionnel stimulant.

\section{Synthèse des Réalisations}

Durant ces quatre semaines, les principales réalisations ont été :
\begin{itemize}
  \item La conception de l'architecture microservices pour la plateforme
  \item La participation au développement des interfaces utilisateur
  \item L'implémentation de systèmes de traitement et nettoyage de données
  \item La contribution à l'optimisation des performances et à l'amélioration de l'expérience utilisateur
\end{itemize}

\section{Compétences Acquises}

Ce stage m'a permis de développer de nombreuses compétences :
\begin{itemize}
  \item \textbf{Compétences techniques :} Approfondissement des connaissances en développement web moderne (Next.js, API REST), en architecture microservices et en traitement de données avec des modèles LLM
  \item \textbf{Compétences méthodologiques :} Maîtrise des outils de gestion de projet agile, de versionnement et de déploiement continu
  \item \textbf{Compétences transversales :} Amélioration des capacités de communication, de travail en équipe et d'adaptation à un environnement professionnel
\end{itemize}

\section{Perspectives}

Ce projet ouvre plusieurs perspectives intéressantes :
\begin{itemize}
  \item \textbf{Pour l'entreprise :} Finalisation et commercialisation de la plateforme e-learning, avec des fonctionnalités supplémentaires comme l'intelligence artificielle pour la personnalisation des parcours d'apprentissage
  \item \textbf{Pour ma carrière :} Approfondissement des compétences en développement full-stack et en architecture de systèmes complexes
\end{itemize}

En conclusion, ce stage a été une expérience extrêmement enrichissante qui m'a permis d'approfondir mes connaissances techniques tout en développant ma compréhension des enjeux liés au développement de solutions éducatives numériques. Les compétences acquises et l'expérience professionnelle seront des atouts précieux pour ma future carrière.

\appendix
\chapter{Annexes}
\thispagestyle{fancy}
[Diagrammes UML, exemples de code, captures d'écran de l'interface]

\end{document}
